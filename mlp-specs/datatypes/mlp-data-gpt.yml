openapi: 3.0.1
info:
  title: Datatypes specification for GPT task type
  version: v0
paths: {}

components:
  schemas:
    ChatCompletionRequest:
      type: object
      required:
        - messages
      properties:
        model:
          type: string
        messages:
          type: array
          items:
            $ref: '#/components/schemas/ChatMessage'
        stream:
          type: boolean

    ChatRole:
      type: string
      enum:
        - system
        - user
        - assistant

    ChatMessage:
      type: object
      required:
        - role
        - content
      properties:
        role:
          $ref: '#/components/schemas/ChatRole'
        content:
          type: string

    ChatCompletionResult:
      type: object
      required:
        - choices
      properties:
        model:
          type: string
        choices:
          type: array
          items:
            $ref: '#/components/schemas/ChatCompletionChoice'
        usage:  # for streaming=true responses we will fill this field in the last chunk
          $ref: '#/components/schemas/Usage'

    ChatCompletionChoice:
      type: object
      required:
        - index
      properties:
        index:
          type: integer
        message: # for streaming=false responses
          $ref: '#/components/schemas/ChatMessage'
        delta:   # for streaming=true responses
          $ref: '#/components/schemas/ChatMessage'
        finish_reason:
          type: string
          enum:
            - stop
            - length

    Usage:
      type: object
      required:
        - prompt_tokens
        - completion_tokens
        - total_tokens
      properties:
        prompt_tokens:
          type: integer
        completion_tokens:
          type: integer
        total_tokens:
          type: integer
